FROM registry.redhat.io/rhosp-rhel8/openstack-neutron-server:16.1
MAINTAINER Nuage OpenStack Engineering opensource@nuagenetworks.net

LABEL name="nuagenetworks/rhosp16-openstack-neutron-server-20-10-latest"
LABEL maintainer="opensource@nuagenetworks.net"
LABEL vendor="Nuage"
LABEL version="20.10.latest"
LABEL release="1"
LABEL summary="Red Hat OpenStack Platform 16.1 neutron-server Nuage Neutron Plugin"
LABEL description="Red Hat OpenStack Platform 16.1 neutron-server Nuage Neutron Plugin"

USER root

COPY RPM-GPG-KEY-Nuage /tmp/RPM-GPG-KEY-Nuage
COPY nuage.repo /etc/yum.repos.d/nuage.repo


RUN yum install --disablerepo "*" --enablerepo Nuage nuage-openstack-neutron nuage-openstack-neutronclient fp-vdev-remote networking-6wind -y


RUN yum clean all
RUN rm -f /etc/yum.repos.d/nuage.repo

COPY licenses /licenses

RUN mkdir -p /opt/nuage_upgrade
WORKDIR /opt/nuage_upgrade
ADD https://s3-us-west-1.amazonaws.com/nuage-public-mirror/574d63bb0727c27e014d8f27ccc275c3f9641b955e8aa7659d74e4df9cf7847a/20.10.latest/train/nuage-openstack-upgrade-20.10.2-92.tar.gz .
RUN tar -xzf nuage-openstack-upgrade-20.10.2-92.tar.gz
WORKDIR /

USER neutron